---
title: "SDK Integration Guide"
description: "Build dApps with the 0xio Wallet SDK"
icon: "code"
---

The **0xio Wallet SDK** enables seamless integration between your decentralized application and the 0xio Wallet Extension, with full support for Octra's FHE privacy features.

## Installation

Install via npm or yarn:

<CodeGroup>

```bash npm
npm install @0xio/sdk
```

```bash yarn
yarn add @0xio/sdk
```

```bash pnpm
pnpm add @0xio/sdk
```

</CodeGroup>

**Package Details:**
- **Package:** `@0xio/sdk`
- **Version:** 2.1.4
- **Min Extension:** v2.0.1+
- **License:** Proprietary (Closed Source)

## Quick Start

The fastest way to get started:

```typescript
import { createZeroXIOWallet } from '@0xio/sdk';

async function initWallet() {
  const wallet = await createZeroXIOWallet({
    appName: 'My Privacy dApp',
    appDescription: 'An encrypted DeFi protocol on Octra',
    autoConnect: true,
  });

  if (wallet.isConnected()) {
    const address = wallet.getAddress();
    console.log('Connected to:', address);

    const balance = await wallet.getBalance(true);
    console.log('Public:', balance.public, 'OCT');
    console.log('Private:', balance.private, 'OCT');
    console.log('Total:', balance.total, 'OCT');
  }
}

initWallet();
```

## Core API

### Connection Methods

#### `initialize()`

Initializes the SDK and checks for extension presence.

```typescript
const success = await wallet.initialize();
if (success) {
  console.log('SDK ready!');
}
```

- **Returns:** `Promise<boolean>`
- **Throws:** `ZeroXIOWalletError` with code `EXTENSION_NOT_FOUND` if 0xio is not installed

#### `isReady()`

Check if SDK is initialized and extension is available.

```typescript
if (wallet.isReady()) {
  // Safe to make requests
}
```

- **Returns:** `boolean`

#### `connect(options)`

Requests connection to the extension. User must approve in popup.

```typescript
const result = await wallet.connect({
  requestPermissions: [
    'read_balance',        // View public OCT balance
    'send_transactions',   // Request signatures
    'view_private_balance' // Access FHE balance (optional)
  ]
});

console.log('Connected:', result.address);
console.log('Balance:', result.balance.total, 'OCT');
console.log('Network:', result.networkInfo.name);
```

- **Returns:** `Promise<ConnectEvent>` with address, balance, networkInfo, and permissions
- **Throws:** `ZeroXIOWalletError` with code `CONNECTION_REFUSED` if user declines

#### `disconnect()`

Disconnects from the extension.

```typescript
await wallet.disconnect();
```

- **Returns:** `Promise<void>`

#### `isConnected()`

Checks current connection status.

```typescript
const connected = wallet.isConnected();
```

- **Returns:** `boolean`

#### `getConnectionInfo()`

Gets the cached connection info.

```typescript
const info = wallet.getConnectionInfo();
console.log(info.address);
console.log(info.balance);
console.log(info.connectedAt);
```

- **Returns:** `ConnectionInfo`

#### `getConnectionStatus()`

Checks connection status with extension (async).

```typescript
const status = await wallet.getConnectionStatus();
if (status.isConnected) {
  console.log('Already connected to:', status.address);
}
```

- **Returns:** `Promise<ConnectionInfo>`

#### `getAddress()`

Gets the currently connected address.

```typescript
const address = wallet.getAddress();
// Returns: "oct1abc123..." or null if not connected
```

- **Returns:** `string | null`

### Balance Methods

#### `getBalance(forceRefresh?)`

Fetches current balances from blockchain or cache.

```typescript
const balance = await wallet.getBalance(true); // Force refresh

console.log(balance.public);  // 1250.5 (number)
console.log(balance.private); // 3420.25 (number)
console.log(balance.total);   // 4670.75 (number)
console.log(balance.currency); // "OCT"
```

- **Parameters:**
  - `forceRefresh`: If true, queries blockchain; if false, uses cached values
- **Returns:** `Promise<Balance>` with public, private, total (numbers), and currency

```typescript
interface Balance {
  public: number;    // Public balance in OCT
  private: number;   // Private (FHE) balance in OCT
  total: number;     // Combined balance
  currency: 'OCT';   // Currency symbol
}
```

### Transaction Methods

#### `sendTransaction(txData)`

Executes a standard public transfer.

```typescript
const result = await wallet.sendTransaction({
  to: 'oct1qv...',
  amount: 10.5,              // Amount in OCT (number)
  message: 'Payment for services' // Optional
});

console.log('Transaction Hash:', result.txHash);
console.log('Success:', result.success);
```

- **Parameters:**
  ```typescript
  interface TransactionData {
    to: string;             // Recipient address
    amount: number;         // Amount in OCT
    message?: string;       // Optional transaction memo
    feeLevel?: 1 | 3;       // 1 = standard, 3 = priority
    isPrivate?: boolean;    // Use private transfer
  }
  ```
- **Returns:** `Promise<TransactionResult>` with txHash, success, message, explorerUrl

#### `sendPrivateTransfer(txData)`

Executes an FHE-encrypted private transfer.

```typescript
const result = await wallet.sendPrivateTransfer({
  to: 'oct1x...',
  amount: 20,                    // Will be encrypted
  message: 'Encrypted Payroll'   // Also encrypted
});

console.log('Private TX Hash:', result.txHash);
```

- **Parameters:**
  ```typescript
  interface PrivateTransferData {
    to: string;        // Recipient address
    amount: number;    // Amount (encrypted client-side)
    message?: string;  // Optional memo (also encrypted)
  }
  ```
- **Returns:** `Promise<TransactionResult>` with txHash and success
- **Note:** Amount encrypted on your device before transmission

#### `getTransactionHistory(page, limit)`

Gets transaction history.

```typescript
const history = await wallet.getTransactionHistory(1, 20);

history.transactions.forEach(tx => {
  console.log(`${tx.from} → ${tx.to}: ${tx.amount} OCT`);
});

console.log('Total:', history.totalCount);
console.log('Has more:', history.hasMore);
```

- **Parameters:** `page` (default: 1), `limit` (default: 20)
- **Returns:** `Promise<TransactionHistory>`

### Privacy Operations

#### `encryptBalance(amount)`

Moves funds from Public → Private balance (shielding).

```typescript
// Encrypt 5 OCT from public to private balance
const success = await wallet.encryptBalance(5.0);

if (success) {
  console.log('Balance shielded!');
}
```

- **Parameters:** `amount: number` (OCT amount to shield)
- **Returns:** `Promise<boolean>`

#### `decryptBalance(amount)`

Moves funds from Private → Public balance (unshielding).

```typescript
// Decrypt 10 OCT from private to public balance
const success = await wallet.decryptBalance(10.0);

if (success) {
  console.log('Balance unshielded!');
}
```

- **Parameters:** `amount: number` (OCT amount to unshield)
- **Returns:** `Promise<boolean>`

#### `getPrivateBalanceInfo()`

Gets detailed private balance information.

```typescript
const info = await wallet.getPrivateBalanceInfo();
console.log('Has private balance:', info.hasPrivateBalance);
console.log('Can decrypt:', info.canDecrypt);
```

- **Returns:** `Promise<PrivateBalanceInfo>`

#### `getPendingPrivateTransfers()`

Gets pending incoming private transfers.

```typescript
const pending = await wallet.getPendingPrivateTransfers();

pending.forEach(transfer => {
  console.log(`From: ${transfer.from}`);
  console.log(`Can claim: ${transfer.canClaim}`);
});
```

- **Returns:** `Promise<PendingPrivateTransfer[]>`

#### `claimPrivateTransfer(transferId)`

Claims a pending private transfer.

```typescript
const result = await wallet.claimPrivateTransfer('transfer_123');
console.log('Claimed! TX:', result.txHash);
```

- **Parameters:** `transferId: string`
- **Returns:** `Promise<TransactionResult>`

### Network Methods

#### `getNetworkInfo()`

Gets current network information.

```typescript
const network = await wallet.getNetworkInfo();
console.log('Network:', network.name);
console.log('RPC:', network.rpcUrl);
console.log('Explorer:', network.explorerUrl);
console.log('Is Testnet:', network.isTestnet);
```

- **Returns:** `Promise<NetworkInfo>`

## Event Listeners

The SDK extends `EventEmitter` for real-time state updates.

### Account Changed

User switched wallets in the extension.

```typescript
wallet.on('accountChanged', (event) => {
  console.log('New Address:', event.newAddress);
  console.log('Previous Address:', event.previousAddress);
  console.log('Balance:', event.balance);

  // Re-fetch user data, update UI
  updateUserInterface(event.newAddress);
});
```

### Network Changed

User switched networks (mainnet/testnet).

```typescript
wallet.on('networkChanged', (event) => {
  console.log('Previous:', event.previousNetwork?.name);
  console.log('New:', event.newNetwork.name);

  // Update RPC endpoint, refresh data
  reconnectToNetwork(event.newNetwork);
});
```

### Balance Changed

Balance updated after transaction confirmation.

```typescript
wallet.on('balanceChanged', (event) => {
  console.log('Address:', event.address);
  console.log('Previous:', event.previousBalance?.total);
  console.log('New:', event.newBalance.total);

  // Update UI with new amounts
  updateBalanceDisplay(event.newBalance);
});
```

### Connect

Wallet connected successfully.

```typescript
wallet.on('connect', (event) => {
  console.log('Connected to:', event.address);
  console.log('Balance:', event.balance.total);
  console.log('Permissions:', event.permissions);
});
```

### Disconnect

User disconnected from dApp or locked wallet.

```typescript
wallet.on('disconnect', (event) => {
  console.log('Disconnect Reason:', event.reason);
  // Possible reasons: 'user_action', 'extension_locked', 'network_error'

  // Clear user session, show connect button
  clearUserSession();
  showConnectModal();
});
```

### Transaction Confirmed

Transaction was confirmed on-chain.

```typescript
wallet.on('transactionConfirmed', (event) => {
  console.log('TX Hash:', event.txHash);
  console.log('Confirmations:', event.confirmations);
});
```

### Extension Lock Events

```typescript
wallet.on('extensionLocked', () => {
  console.log('Wallet locked - user needs to unlock');
});

wallet.on('extensionUnlocked', () => {
  console.log('Wallet unlocked');
});
```

### Removing Listeners

```typescript
// Remove specific listener
wallet.off('accountChanged', handlerFunction);

// Remove all listeners for an event
wallet.removeAllListeners('balanceChanged');

// Remove all listeners
wallet.removeAllListeners();
```

### Cleanup

Clean up SDK resources when done.

```typescript
wallet.cleanup();
```

## Error Handling

The SDK provides typed error codes for graceful error handling.

```typescript
import {
  ZeroXIOWalletError,
  ErrorCode
} from '@0xio/sdk';

try {
  await wallet.sendTransaction({
    to: 'oct1...',
    amount: 100
  });
} catch (error) {
  if (error instanceof ZeroXIOWalletError) {
    switch (error.code) {
      case ErrorCode.USER_REJECTED:
        console.log('User cancelled the transaction');
        showNotification('Transaction cancelled');
        break;

      case ErrorCode.INSUFFICIENT_BALANCE:
        console.log('Not enough balance');
        showNotification('Insufficient funds');
        break;

      case ErrorCode.EXTENSION_NOT_FOUND:
        console.log('0xio Extension not installed');
        showInstallPrompt();
        break;

      case ErrorCode.NETWORK_ERROR:
        console.log('Network connection issue');
        showRetryOption();
        break;

      case ErrorCode.INVALID_ADDRESS:
        console.log('Invalid recipient address');
        showError('Please check the address');
        break;

      case ErrorCode.WALLET_LOCKED:
        console.log('Wallet is locked');
        showError('Please unlock your wallet');
        break;

      case ErrorCode.PERMISSION_DENIED:
        console.log('Permission not granted');
        break;

      case ErrorCode.TRANSACTION_FAILED:
        console.log('Transaction failed:', error.message);
        break;

      default:
        console.error('Unexpected error:', error.message);
    }

    // Access error details
    if (error.details) {
      console.log('Details:', error.details);
    }
  } else {
    console.error('Unknown error:', error);
  }
}
```

### Error Codes

| Error Code | Description |
|-----------|-------------|
| `USER_REJECTED` | User declined transaction or connection |
| `INSUFFICIENT_BALANCE` | Not enough funds for transaction + gas |
| `EXTENSION_NOT_FOUND` | 0xio Wallet Extension not installed |
| `NETWORK_ERROR` | RPC connection or blockchain issue |
| `INVALID_ADDRESS` | Malformed or invalid Octra address |
| `INVALID_AMOUNT` | Negative or improperly formatted amount |
| `PERMISSION_DENIED` | Requested permission not granted |
| `TRANSACTION_FAILED` | Transaction reverted or rejected |
| `WALLET_LOCKED` | Wallet is locked, user needs to unlock |
| `CONNECTION_REFUSED` | Connection was refused |
| `RATE_LIMIT_EXCEEDED` | Too many requests |
| `UNKNOWN_ERROR` | Unexpected error occurred |

## Framework Integration

### React Hook

```typescript
import { useEffect, useState } from 'react';
import { ZeroXIOWallet, Balance, ConnectEvent } from '@0xio/sdk';

const walletInstance = new ZeroXIOWallet({ appName: 'My DApp' });

export function useWallet() {
  const [wallet] = useState(walletInstance);
  const [address, setAddress] = useState<string | null>(null);
  const [balance, setBalance] = useState<Balance | null>(null);
  const [isConnected, setIsConnected] = useState(false);
  const [isReady, setIsReady] = useState(false);

  useEffect(() => {
    wallet.initialize().then(() => {
      setIsReady(true);

      // Check for existing connection
      wallet.getConnectionStatus();
    });

    wallet.on('connect', (event: ConnectEvent) => {
      setAddress(event.address);
      setBalance(event.balance);
      setIsConnected(true);
    });

    wallet.on('disconnect', () => {
      setAddress(null);
      setBalance(null);
      setIsConnected(false);
    });

    wallet.on('balanceChanged', (event) => {
      setBalance(event.newBalance);
    });

    wallet.on('accountChanged', (event) => {
      setAddress(event.newAddress);
      if (event.balance) setBalance(event.balance);
    });

    return () => {
      wallet.removeAllListeners();
    };
  }, [wallet]);

  const connect = async () => {
    try {
      const result = await wallet.connect({
        requestPermissions: ['read_balance', 'send_transactions']
      });
      setAddress(result.address);
      setBalance(result.balance);
      setIsConnected(true);
    } catch (error) {
      console.error('Connection failed:', error);
      throw error;
    }
  };

  const disconnect = async () => {
    await wallet.disconnect();
  };

  const refreshBalance = async () => {
    if (isConnected) {
      const newBalance = await wallet.getBalance(true);
      setBalance(newBalance);
    }
  };

  return {
    wallet,
    address,
    balance,
    isConnected,
    isReady,
    connect,
    disconnect,
    refreshBalance
  };
}
```

### Vue.js Composition API

```typescript
import { ref, onMounted, onUnmounted } from 'vue';
import { ZeroXIOWallet, Balance } from '@0xio/sdk';

export function useWallet() {
  const wallet = new ZeroXIOWallet({ appName: 'My DApp' });
  const address = ref<string | null>(null);
  const balance = ref<Balance | null>(null);
  const isConnected = ref(false);
  const isReady = ref(false);

  onMounted(async () => {
    await wallet.initialize();
    isReady.value = true;

    // Check for existing connection
    wallet.getConnectionStatus();

    wallet.on('connect', (event) => {
      address.value = event.address;
      balance.value = event.balance;
      isConnected.value = true;
    });

    wallet.on('disconnect', () => {
      address.value = null;
      balance.value = null;
      isConnected.value = false;
    });

    wallet.on('balanceChanged', (event) => {
      balance.value = event.newBalance;
    });
  });

  onUnmounted(() => {
    wallet.removeAllListeners();
  });

  const connect = async () => {
    try {
      const result = await wallet.connect({
        requestPermissions: ['read_balance', 'send_transactions']
      });
      address.value = result.address;
      balance.value = result.balance;
      isConnected.value = true;
    } catch (error) {
      console.error('Connection failed:', error);
      throw error;
    }
  };

  const disconnect = async () => {
    await wallet.disconnect();
  };

  return { wallet, address, balance, isConnected, isReady, connect, disconnect };
}
```

## TypeScript Definitions

The SDK exports comprehensive TypeScript types:

```typescript
import type {
  // Core types
  WalletAddress,
  Balance,
  NetworkInfo,
  ConnectionInfo,
  ConnectOptions,
  SDKConfig,

  // Transaction types
  TransactionData,
  SignedTransaction,
  TransactionResult,
  TransactionHistory,
  Transaction,

  // Event types
  WalletEventType,
  WalletEvent,
  ConnectEvent,
  DisconnectEvent,
  AccountChangedEvent,
  BalanceChangedEvent,
  NetworkChangedEvent,
  TransactionConfirmedEvent,
  ErrorEvent,

  // Private balance types
  PrivateBalanceInfo,
  PrivateTransferData,
  PendingPrivateTransfer,

  // Permission types
  Permission
} from '@0xio/sdk';

// Key type definitions
interface Balance {
  public: number;     // Public balance in OCT
  private: number;    // Private (FHE) balance in OCT
  total: number;      // Combined balance
  currency: 'OCT';    // Currency symbol
}

interface TransactionData {
  to: string;              // Recipient address
  amount: number;          // Amount in OCT
  message?: string;        // Optional memo
  feeLevel?: 1 | 3;        // 1 = standard, 3 = priority
  isPrivate?: boolean;     // Use private transfer
}

interface NetworkInfo {
  id: string;              // Network identifier
  name: string;            // Display name
  rpcUrl: string;          // RPC endpoint
  explorerUrl?: string;    // Block explorer URL
  color: string;           // UI color
  isTestnet: boolean;      // Is testnet network
}

type Permission =
  | 'read_balance'
  | 'send_transactions'
  | 'view_private_balance'
  | 'private_transfers';
```

## Utility Functions

The SDK exports useful utility functions:

```typescript
import {
  // Validation
  isValidAddress,
  isValidAmount,
  isValidMessage,
  isValidFeeLevel,
  isValidNetworkId,

  // Formatting
  formatOCT,
  formatAddress,
  formatTimestamp,
  formatTxHash,

  // Conversion
  toMicroOCT,
  fromMicroOCT,

  // Error utilities
  createErrorMessage,
  isErrorType,

  // Async utilities
  delay,
  retry,
  withTimeout,

  // Browser utilities
  isBrowser,
  checkBrowserSupport,

  // Development utilities
  generateMockData,
  createLogger
} from '@0xio/sdk';

// Examples
if (isValidAddress('oct1...')) {
  console.log('Valid address');
}

const formatted = formatOCT(123.456789, 2); // "123.46"
const shortAddr = formatAddress('oct1abc...xyz'); // "oct1ab...xyz"

const micro = toMicroOCT(1.5); // 1500000
const oct = fromMicroOCT(1500000); // 1.5

await delay(1000); // Wait 1 second
```

## SDK Compatibility

```typescript
import {
  SDK_VERSION,
  MIN_EXTENSION_VERSION,
  SUPPORTED_EXTENSION_VERSIONS,
  checkSDKCompatibility
} from '@0xio/sdk';

console.log('SDK Version:', SDK_VERSION); // "2.1.4"
console.log('Min Extension:', MIN_EXTENSION_VERSION); // "2.0.1"
console.log('Supported:', SUPPORTED_EXTENSION_VERSIONS); // "^2.0.1"

// Check browser compatibility
const { compatible, issues, recommendations } = checkSDKCompatibility();
if (!compatible) {
  console.log('Issues:', issues);
  console.log('Recommendations:', recommendations);
}
```

## Best Practices

### Connection
- Always check `isConnected()` before operations
- Handle `USER_REJECTED` errors gracefully
- Provide clear install prompts if extension not found
- Request minimum necessary permissions
- Use `getConnectionStatus()` to restore existing connections

### Transactions
- Validate addresses with `isValidAddress()` before sending
- Display full transaction details to users
- Handle all error cases explicitly
- Show loading states during confirmation
- Provide transaction hash for tracking

### Privacy
- Clearly indicate when using FHE features
- Explain gas cost differences
- Let users choose public vs private
- Don't store sensitive data

### Performance
- Cache balance data appropriately
- Use `forceRefresh` sparingly
- Batch multiple operations when possible
- Clean up event listeners on unmount with `cleanup()`

<Tip>
For production dApps, implement comprehensive error handling and user feedback for all wallet operations.
</Tip>
